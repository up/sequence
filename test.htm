<html>
<head>
<title>sequence.js Test Suite</title>
<script src="sequence.js"></script>
</head>
<body>
<h1>sequenceJS Test</h1>
<script>
// helper
var time = 0;
function timer(action) {
  var start = new Date();
  if (time < 1 || action === 'start') {
    time = start;
  } else if (action === 'stop') {
    return start - time;
  }
}

var setTimer = function(next) {
  timer('start');
  next();
};

var testA = function(next) {
  setTimeout(function() {
    console.log("Test A Complete");
    sequence.cache.test = "from Test A";
    next();
  }, 1000);
};

var testB = function(next) {
  setTimeout(function() {
    console.log("Test B Complete");
    console.log(sequence.cache.test);
    next();
  }, 1000);
};

var callback = function() {
  console.log("Sequence complete in " + timer('stop') + " msec");
};

//sequence.run( [ setTimer, testA, testA, testA, testA, testB ], callback );

sequence.run(
  [
    function(next){
      setTimeout(function() {
        console.log("Funktion A Complete");
        sequence.cache.testA = "from Funktion A";
        next();
      }, 1000);
    },
    function(next){
      setTimeout(function() {
        console.log("Funktion B Complete");
        console.log(sequence.cache.testA);
        next();
      }, 1000);
    }
  ], 
  function () {
    console.log('Sequence complete'); 
  }
);
</script>
</body>
</html>
